<?xml version="1.0" encoding="UTF-8"?>
<ejb-jar xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
         xmlns="http://java.sun.com/xml/ns/javaee"
         xmlns:application="http://java.sun.com/xml/ns/javaee/ejb-jar_3_0.xsd"
         xsi:schemaLocation="http://java.sun.com/xml/ns/javaee
                             http://java.sun.com/xml/ns/javaee/ejb-jar_3_0.xsd" version="3.0">
                             
    <interceptors>
        <interceptor>
            <interceptor-class>br.gov.bcb.util.ejb.controle.EJBInterceptor</interceptor-class>
            <around-invoke>
                <method-name>logMethod</method-name>
            </around-invoke>
            <resource-env-ref>
                <resource-env-ref-name>SessionContext</resource-env-ref-name>
                <resource-env-ref-type>javax.ejb.SessionContext</resource-env-ref-type>
                <injection-target>
                    <injection-target-class>br.gov.bcb.util.ejb.controle.EJBInterceptor</injection-target-class>
                    <injection-target-name>ctx</injection-target-name>
                </injection-target>
            </resource-env-ref>
        </interceptor>
    </interceptors>


    <assembly-descriptor>
        <interceptor-binding>
            <ejb-name>br.gov.bcb.dicel.negociacao.servico.*</ejb-name>
            <interceptor-class>br.gov.bcb.util.ejb.controle.EJBInterceptor</interceptor-class>
        </interceptor-binding>
       <application-exception>
       		<exception-class>br.gov.bcb.util.comum.excecao.SelicException</exception-class>
       		<rollback>true</rollback>
       </application-exception>
    </assembly-descriptor>

</ejb-jar>
